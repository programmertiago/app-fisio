{% extends "base.html" %}

{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="mb-0">Painel de Trabalho - {{ hoje }}</h1>
        <a href="{{ url_for('adicionar_paciente') }}" class="btn btn-primary">Cadastrar Novo Paciente</a>
    </div>

    {% for unidade, pacientes_na_unidade in pacientes_por_unidade.items() %}
    <div class="card unit-panel mb-4">
        <div class="card-header">
            <h2 class="unit-panel__title mb-0">{{ unidade }} ({{ pacientes_na_unidade|length }} pacientes)</h2>
        </div>
        
        <div class="list-group list-group-flush">
            {% for paciente in pacientes_na_unidade %}
            <div class="list-group-item patient-item">
                <div class="patient-item__details">
                    <span class="patient-item__name">{{ paciente.nome }}</span>
                    <span class="patient-item__info text-muted">{{ paciente.idade }} anos - Leito: {{ paciente.leito }}</span>
                </div>

                <div class="patient-item__attendance">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="manha-{{paciente.id}}">
                        <label class="form-check-label" for="manha-{{paciente.id}}">ManhÃ£</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="tarde-{{paciente.id}}">
                        <label class="form-check-label" for="tarde-{{paciente.id}}">Tarde</label>
                    </div>
                </div>

                <a href="{{ url_for('detalhes_paciente', paciente_id=paciente.id) }}" class="patient-item__action fw-bold">Ver / Evoluir</a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
{% endblock %}